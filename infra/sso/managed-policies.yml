AWSTemplateFormatVersion: 2010-09-09
Description: >-
  Developer role in Sydney
Resources:
  DeveloperManagedPolicy:
    Type: AWS::IAM::ManagedPolicy
    Properties:
      Description: A managed policy only for developers
      ManagedPolicyName: DeveloperManagedPolicy
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
        - Sid: DenyAdmin
          Effect: Deny
          Action:
          - organizations:*
          - account:*
          Resource: "*"
        - Sid: AllowS3
          Effect: Allow
          Action: s3:*
          Resource: "*"
        - Sid: AllowIam
          Effect: Allow
          Action: iam:*
          Resource: "*"
        - Sid: AllowEC2
          Effect: Allow
          Action: ec2:*
          Resource: "arn:aws:ec2:ap-southeast-2:*"
        - Sid: AllowCFN
          Effect: Allow
          Action: cloudformation:*
          Resource: "arn:aws:cloudformation:ap-southeast-2:*"
        - Sid: AllowCloudwatch
          Effect: Allow
          Action: cloudwatch:*
          Resource: "arn:aws:cloudwatch:ap-southeast-2:*"
        - Sid: AllowLambda
          Effect: Allow
          Action: lambda:*
          Resource: "arn:aws:lambda:ap-southeast-2:*"
        - Sid: AllowGuardDuty
          Effect: Allow
          Action: guardduty:*
          Resource: "arn:aws:guardduty:ap-southeast-2:*"

Outputs:
  DeveloperRole:
    Description: Developer role in Sydney
    Value: !Ref DeveloperManagedPolicy
    Export:
      Name: DeveloperManagedPolicy
